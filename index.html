<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stochastic Gravity</title>
    <link rel="stylesheet" href="index.css" />
    <script src="index.js" type="module"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-trendline"></script>
  </head>
  <body>
    <p>
      For the sake of curiosity, I threw out all of what I know about physics. Conservation of energy, gone. Symmetric forces, gone. Deterministic behavior, gone. Fundamentally, the demonstration below has very little to offer for those trying to learn physics because that is not what it’s intended for.
    </p>
    <p>
      I was struck by an idea that I could not get out of my head, and I wanted to prove to myself that it makes sense whether or not it has any practical application besides the programming practice that I got making it.
    </p>
    <h1>Stochastic Gravity</h1>
    <p>
      The basis of this “Stochastic Gravity” as I decided to call it is that all particles feel a force from all other particles, but they are only allowed to experience this force in discrete time steps. Think of these time steps as the ticks of a clock. Each particle can only update its position when its clock ticks.
    </p>
    <p>
      If all of the particles have the same clock, then we have the setup to a regular particle simulation. Because of computation limitations, particle simulations always progress in discrete time steps like this. 60 times per seconds, for example, the particles calculate the forces that they experience, their acceleration, then their velocity, which gives them their new position. Step by step, the simulation continues in this manner. If the time steps are small enough, these simulations give the illusion of continuous motion.
    </p>
    <p>
      This is what we have in the first simulation below. Once per frame, all of the particle’s have their clocks tick. They feel an attractive force to one another that is inversely proportional to their distance from one another squared, and a repulsive force that is inversely proportional to their distance from one another cubed.
    </p>
    <p>
      As the simulation runs, you can see how the average position of the particles (shown in blue) changes. Because there are no external forces acting on these particles, the average position should not move from its original location (shown in green underneath the blue). These particles will just swirl around until they run out of energy (I added a small amount of damping to the system), but the simulation will cut off long before that happens.
    </p>
    <p class="hint">
      Click anywhere within the simulation to start and stop it. While hovering over the simulation, a button will appear in the top left. Clicking this button will reset the simulation. After some time, the standard deviation of the particles will be graphed in the graph below the simulation along with the average distance between the most extreme particles, which I call the span.
    </p>
    <p class="hint">
      While particles are updating they will be shown in yellow. Otherwise they will be shown in red. The green point is the average position of the particles, and the blue point is the current average position of the particles.
    </p>
    <div class="simHolder">
      <div id="global" class="sim">
        <div class="reset"></div>
      </div>
    </div>
    <canvas id="globalChart" width="600" height="300"></canvas>
    <p>Here is the first simulation, which has one thread that is more likely to update tiles on the left side of the sim, basically forming a temporal gradient.</p>
    <div id="selectionOptions">
      <div>
        <label for="x-bias-select">Choose an X-Direction Selection Bias:</label>
        <select id="x-bias-select">
          <option value="noBias">No Bias</option>
          <option value="lowBias">Bias for Low Values</option>
          <option value="highBias">Bias for High Values</option>
          <option value="midBias">Bias for Middle Values</option>
          <option value="outBias">Bias for Outer Values</option>
        </select>
      </div>

      <div>
        <label for="y-bias-select">Choose a Y-Direction Selection Bias:</label>
        <select id="y-bias-select">
          <option value="noBias">No Bias</option>
          <option value="lowBias">Bias for Low Values</option>
          <option value="highBias">Bias for High Values</option>
          <option value="midBias">Bias for Middle Values</option>
          <option value="outBias">Bias for Outer Values</option>
        </select>
      </div>
    </div>
    <div class="simHolder">
      <div id="gradient" class="sim">
        <div class="reset"></div>
      </div>
    </div>
    <canvas id="gradientChart" width="600" height="300"></canvas>
    <p>This second gradient is similar, but the particles are updated in circles instead of in squares. Each time they update, a random circle is chosen with a random position and a random radius. All particles within that circle are updated.</p>
    <div class="simHolder">
      <div id="circle" class="sim">
        <div class="reset"></div>
      </div>
    </div>
    <canvas id="circleChart" width="600" height="300"></canvas>
    <p>Compute Sim</p>
    <div class="simHolder">
      <div id="compute" class="sim">
        <div class="reset"></div>
      </div>
    </div>
    <canvas id="computeChart" width="600" height="300"></canvas>
  </body>
</html>
